<nav id="toc">
  <h2>Table of Contents</h2>
  <ul>
    {% assign headers = page.content | split: '<h2>' %}
    {% for header in headers %}
      {% if forloop.first == false %}
        {% assign title = header | split: '</h2>' | first %}
        {% assign link = title | downcase | replace: ' ', '-' | replace: ',', '' | replace: '.', '' | strip %}
        <li><a href="#{{ link | slugify }}">{{ title | strip_html | strip }}</a></li>
      {% endif %}
    {% endfor %}
  </ul>
</nav>
